{% extends "base.html" %}

{% block custom_style %}
    <!-- Custom styles for this template -->
    <style>
        body {
            background-color: #f8f9fa;
        }

        .box {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            padding: 20px;
        }

        .result-box {
            margin-top: 20px;
            padding: 10px;
            background-color: #e2f0ff;
            border: 1px solid #b3d1ff;
            border-radius: 5px;
        }

        .field {
            margin-bottom: 20px;
        }

        .control {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ced4da;
        }

        .button {
            background-color: #007bff;
            border-color: #007bff;
            color: #ffffff;
        }

        .button:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        .error {
            color: #dc3545;
        }
    </style>
{% endblock %}

{% block content %}
    <h1>Map Reduce Processing</h1>
    <p>Procesamiento Map reduce</p>

    <!-- Formulario para procesamiento Map Reduce -->
    <div class="box">
        <h2>Procesamiento Map Reduce</h2>
        <form method="post" action="/mapReduceProcessing">
            {{ form.hidden_tag() }}
            <div class="field">
                <div class="control">
                    <input class="input is-large" type="text" name="nameDb" placeholder="Name">
                </div>
            </div>
            <button class="button is-block is-info is-large is-fullwidth" type="submit">Procesar</button>
        </form>
        {% if error3 %}
            <p class="error"><strong>Error:</strong> {{ error3 }}</p>
        {% endif %}
        <!-- Mostrar info MR -->
        {% if status %}
            <div class="result-box">
                <h3>Informacion de Map Reduce</h3>
                <p>{{ status }}</p>
            </div>
        {% else %}
            <div class="result-box">
                <p>No devuelve nada</p>
            </div>
        {% endif %}
    </div>

    <!-- Formulario para obtener resultados -->
    <div class="box">
        <h2>Obtener Resultados</h2>
        <form method="post" action="/mapReduceResult">
            <div class="field">
                <div class="control">
                    <input class="input is-large" type="text" name="mrid" placeholder="Id">
                </div>
            </div>
            <div class="field">
                <div class="control">
                    <input class="input is-large" type="text" name="nameDb" placeholder="Name">
                </div>
            </div>
            <button class="button is-block is-success is-large is-fullwidth" type="submit">Obtener resultado</button>
        </form>
        {% if error4 %}
            <p class="error"><strong>Error:</strong> {{ error4 }}</p>
        {% endif %}
         <!-- Mostrar el resultado -->
         {% if resultado %}
         <div class="result-box">
             <h3>Resultado de Map Reduce</h3>
             <p>{{ resultado }}</p>
         </div>
     {% endif %}
    </div>
{% endblock %}
